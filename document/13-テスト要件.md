# 13. テスト要件

[[12-開発スケジュール|← 前へ]] | [[00-INDEX|目次]] | [[14-デプロイメント|次へ →]]

---

## 13.1 テスト戦略

```mermaid
graph TB
    subgraph "テストピラミッド"
        E2E[E2Eテスト<br/>統合動作確認]
        Integration[統合テスト<br/>コンポーネント連携]
        Unit[単体テスト<br/>個別機能]
    end
    
    Unit --> Integration
    Integration --> E2E
    
    style E2E fill:#ff6b6b
    style Integration fill:#feca57
    style Unit fill:#1dd1a1
```

## 13.2 単体テスト

### テスト対象

**フロントエンド:**
- AnimationManager
- LipSyncController
- EmotionController
- IdleMotionController
- API通信ユーティリティ

**バックエンド:**
- OpenAI Service
- TTS Service
- LipSync Service
- APIエンドポイント

### 実装例

```typescript
// AnimationManager.test.ts
import { describe, it, expect } from 'vitest';
import { AnimationManager } from './AnimationManager';

describe('AnimationManager', () => {
  it('should play animation with correct priority', () => {
    const manager = new AnimationManager();
    const animation = createTestAnimation();
    
    manager.playAnimation(animation, AnimationPriority.GESTURE);
    
    expect(manager.getCurrentAnimation(AnimationPriority.GESTURE))
      .toBe(animation);
  });
});
```

## 13.3 統合テスト

### テストシナリオ

```mermaid
sequenceDiagram
    participant Tester
    participant App
    participant Avatar
    participant API
    
    rect rgb(200, 220, 240)
    Note over Tester,API: シナリオ1: 基本対話
    Tester->>App: "こんにちは"入力
    App->>API: POST /api/chat
    API-->>App: 応答データ
    App->>Avatar: greeting + happy表情
    Note over Tester: ✓ 動作確認
    end
```

## 13.4 パフォーマンステスト

### テスト項目

| 項目 | 目標値 | 測定方法 |
|------|--------|---------|
| 初期ロード | < 3秒 | Lighthouse |
| AI応答 | < 5秒 | API計測 |
| FPS | >= 30 | Chrome DevTools |
| メモリ | < 500MB | Task Manager |

関連: [[08-非機能要件#パフォーマンス要件|非機能要件]]

## 13.5 ブラウザテスト

### 対象ブラウザ

- Chrome 100+
- Firefox 100+
- Safari 15+
- Edge 100+

関連: [[08-非機能要件#互換性|非機能要件]]

## 13.6 関連ドキュメント

- [[08-非機能要件|非機能要件]]
- [[12-開発スケジュール|開発スケジュール]]

---

**タグ**: #テスト #品質保証 #パフォーマンス
**更新日**: 2025-10-30
